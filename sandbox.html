<html>
<head>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="icon" href="/favicon.ico" />
</head>
<body>
    <h1>CodeOnly Sandbox</h1>
    <div>
        <button type="button" id="testButton1">A</button>
        <button type="button" id="testButton2">B</button>
        <button type="button" id="testButton3">C</button>
        <button type="button" id="testButton4">D</button>
    </div>
    <div id="main" style="width: 100px; height: 200px; overflow-y: scroll;">

    </div>

    <script type="module">
        let elMain = document.getElementById("main");
        let divs = [];
        let index = 0;
        for (let i=0; i<500; i++)
        {
            let elDiv = document.createElement("DIV");
            elDiv.innerText = `Item ${index++}`;
            elMain.appendChild(elDiv);
            divs.push(elDiv);
        }

        document.getElementById("testButton1").addEventListener("click", () => {
            let divsDel = divs.splice(100, 100);
            divsDel.forEach(x => x.remove());
        });

        document.getElementById("testButton2").addEventListener("click", () => {
            let divsDel = divs.splice(100, 100);
            divsDel.forEach(x => x.remove());
            let before = divs[100];

            for (let i=0; i<100; i++)
            {
                let elDiv = document.createElement("DIV");
                elDiv.innerText = `Item ${index++}`;
                before.before(elDiv);
                divs.splice(100 + i, 0, elDiv);
            }
        });

        document.getElementById("testButton3").addEventListener("click", () => {
            divs.forEach(x => x.remove());

            for (let i=0; i<100; i++)
            {
                let elDiv = document.createElement("DIV");
                elDiv.innerText = `Item ${index++}`;
                elMain.appendChild(elDiv);
                divs.push(elDiv);
            }
        });

        document.getElementById("testButton4").addEventListener("click", () => {
            divs.forEach(x => x.remove());
            let elMain2 = elMain.cloneNode();
            elMain.replaceWith(elMain2);
            elMain = elMain2;

            for (let i=0; i<100; i++)
            {
                let elDiv = document.createElement("DIV");
                elDiv.innerText = `Item ${index++}`;
                elMain.appendChild(elDiv);
                divs.push(elDiv);
            }
        });
    </script>

</body>
</html>